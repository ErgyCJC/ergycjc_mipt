# A*

__A-star__ - модификация алгоритма Дейкстры, использующая эвристическую функцию (функцию потенциала, как по лекции). Асимптотика работы такая же, как у алгоритма Дейкстры.

Псевдокод есть [тут](https://ru.wikipedia.org/wiki/A*).

Используется для нахождения оптимального пути между двумя вершинами графа; прекращает работу в тот момент, когда находится первый путь между ними, считая этот путь оптимальным.

Для работы __A*__ требуется выбрать монотонную функцию потенциала. Если выбрать её неверно, то будет найден неверный путь.

***

Положим `h(v)` - функцией потенциала (предполагаемого расстояния от рассматриваемой вершины `v`  до конечной вершины `v_end`), `g(v)` - функцией уже посчитанного расстояния между начальной вершиной `v_start` и рассматриваемой `v`, `f(v) = g(v) + h(v)`. Следующие вершины для рассмотрения добавляются в `primary queue` и сортируются по невозрастанию соответствующих им значений `f(v)`.

***

Типичный пример использования алгоритма: поиск пути для моба на карте: карту можно разбить на квадраты, шестиугольники и другие секторы, каждый из них - вершина графа, связи с соедними секторами - рёбра. Тогда `g(v)` - кол-во рёбер от `v_start` до `v`. `f(v)` можно положить манхетенским расстоянием (для прямоугольников) или евклидовым в общем случае.

Если каждая клетка дополнительно имеет свой вес, то рассчитывается средний вес ребра для эвристики, на который потом домножается выбранная функция расстояния (евклидово, ...):

![equation](https://latex.codecogs.com/png.latex?\omega_{average}&space;=&space;\frac{1}{|E|}{}&space;\sum_{i=1}^{|E|}\omega(e_i)))


| []() |  |  |  |  |
|---|---|---|---|---|
| 0 | 0 | 0 | 0 | `**` |
| 0 | 0 | 0 | 0 | 0 |
| `*` | 0 | 0 | 0 | 0 |

| []() |  |  |  |  |
|---|---|---|---|---|
| 0 | 0 | 0 | 0 | `**` |
| `h+1` | `h+1` | 0 | 0 | 0 |
| `*` | `h+1` | 0 | 0 | 0 |

| []() |  |  |  |  |
|---|---|---|---|---|
| `h+2` | `h+2` | `h+2` | 0 | `**` |
| `h+1` | `h+1` | `h+2` | 0 | 0 |
| `*` | `h+1` | `h+2` | 0 | 0 |

| []() |  |  |  |  |
|---|---|---|---|---|
| `h+2` | `h+2` | `h+2` | `h+3` | `**` |
| `h+1` | `h+1` | `h+2` | `h+3` | 0 |
| `*` | `h+1` | `h+2` | `h+3` | 0 |

| []() |  |  |  |  |
|---|---|---|---|---|
|  |  | `*` | `*` | `**` |
|  | `*` |  |  |  |
| `*` |  |  |  |  |

***

Для пятнашек: эвристика - кол-во фишек, которые не на своих местах стоят, вершина графа - состояние игрового поля (имеет смысо хранить один числом, пример для восьминашек: `120345678` - здесь поле 3x3 тривиально разворачивается в строку), ребро графа - переход от одного состояни к другому.
